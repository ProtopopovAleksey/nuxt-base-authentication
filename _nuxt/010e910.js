(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{153:function(t,e,n){"use strict";n.r(e);var r={data:function(){return{show:!1,message:"",color:""}},created:function(){var t=this;this.$store.subscribe((function(e,n){"snackbar/showMessage"===e.type&&(t.message=n.snackbar.content,t.color=n.snackbar.color,t.show=!0)}))}},o=n(66),c=n(74),l=n.n(c),f=n(344),v=n(339),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-snackbar",{attrs:{color:t.color},scopedSlots:t._u([{key:"action",fn:function(e){var r=e.attrs;return[n("v-btn",t._b({attrs:{text:""},on:{click:function(e){t.show=!1}}},"v-btn",r,!1),[t._v("\n      Close\n    ")])]}}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v("\n  "+t._s(t.message)+"\n\n  ")])}),[],!1,null,null,null);e.default=component.exports;l()(component,{VBtn:f.a,VSnackbar:v.a})},158:function(t,e,n){"use strict";e.a=function(t,e){t.app;var n=t.store;e("notifier",{showMessage:function(t){var e=t.content,content=void 0===e?"":e,r=t.color,o=void 0===r?"":r;n.commit("snackbar/showMessage",{content:content,color:o})}})}},201:function(t,e,n){var content=n(264);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(24).default)("013b8665",content,!0,{sourceMap:!1})},226:function(t,e,n){"use strict";var r={components:{snackbar:n(153).default},created:function(){var t=this.$auth.strategy.token.get();t&&this.$store.dispatch("setTokenAuthorization","".concat(t))},methods:{logout:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$notifier.showMessage({content:"Выход произведен успешно",color:"success"}),t.$router.push("/")}))}}},o=n(66),c=n(74),l=n.n(c),f=n(338),v=n(343),h=n(344),d=n(345),_=n(340),m=n(329),w=n(341),k=n(342),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{dark:""}},[n("v-app-bar",{attrs:{fixed:"",app:""}},[n("v-btn",{staticClass:"ml-4",attrs:{text:"",to:"/"}},[t._v("\n      Home\n    ")]),t._v(" "),n("v-btn",{attrs:{text:"",to:"/collections"}},[t._v("\n      Collections\n    ")]),t._v(" "),n("v-spacer"),t._v(" "),t.$auth.loggedIn?n("v-btn",{attrs:{elevation:"0"},on:{click:t.logout}},[t._v("\n      Logout\n      "),n("v-icon",[t._v("mdi-logout")])],1):n("v-btn",{attrs:{to:"/login",elevation:"0"}},[t._v("\n      Login\n      "),n("v-icon",[t._v("mdi-login")])],1)],1),t._v(" "),n("v-main",[n("v-container",[n("nuxt")],1),t._v(" "),n("snackbar")],1),t._v(" "),n("v-footer",{attrs:{app:""}},[n("v-spacer"),t._v(" "),n("span",[t._v("Protopopov Aleksey - "+t._s((new Date).getFullYear()))])],1)],1)}),[],!1,null,null,null);e.a=component.exports;l()(component,{Snackbar:n(153).default}),l()(component,{VApp:f.a,VAppBar:v.a,VBtn:h.a,VContainer:d.a,VFooter:_.a,VIcon:m.a,VMain:w.a,VSpacer:k.a})},236:function(t,e,n){n(237),t.exports=n(238)},254:function(t,e,n){"use strict";n.r(e),e.default=function(t){var e=t.$auth,n=t.redirect,r=t.$notifier;e.loggedIn||(r.showMessage({content:"Для просмотра этой страницы необходима авторизация",color:"error"}),n("/login"))}},263:function(t,e,n){"use strict";n(201)},264:function(t,e,n){var r=n(23)(!1);r.push([t.i,"h1[data-v-887c0966]{font-size:20px}",""]),t.exports=r},309:function(t,e,n){"use strict";n.r(e),n.d(e,"state",(function(){return d})),n.d(e,"mutations",(function(){return _})),n.d(e,"actions",(function(){return m}));n(9),n(8),n(13),n(17),n(12),n(18);var r=n(157),o=n(2),c=n(14),l=(n(77),n(69)),f=n.n(l);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d=function(){return{}},_={},m={login:function(t){var e=arguments,n=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var o,c,l,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.state,t.commit,o=t.dispatch,c=e.length>1&&void 0!==e[1]?e[1]:{},r.prev=2,l=h(h({},c),{},{client_id:n.$config.client_id,client_secret:n.$config.client_secret,grant_type:n.$config.grant_type}),r.next=6,n.$auth.loginWith("local",{data:l});case 6:return f=r.sent,n.$auth.setUser(f.data.user),o("setTokenAuthorization",f.data.access_token),r.abrupt("return",f.data);case 12:throw r.prev=12,r.t0=r.catch(2),new Error(r.t0.response.data.error.message);case 15:case"end":return r.stop()}}),r,null,[[2,12]])})))()},logout:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(0,t.dispatch)("setTokenAuthorization",null),n.next=4,e.$auth.logout();case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},setTokenAuthorization:function(t,e){Object(r.a)(t),f.a.defaults.headers.common.Authorization=e},setCollection:function(t,e){var n=this;return Object(c.a)(regeneratorRuntime.mark((function o(){var c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return Object(r.a)(t),o.prev=1,o.next=4,f.a.post("".concat(n.$axios.defaults.baseURL,"/userarea/movies/collections"),e);case 4:return c=o.sent,o.abrupt("return",c.data);case 8:if(o.prev=8,o.t0=o.catch(1),!o.t0.response.data.errors){o.next=12;break}throw o.t0.response.data.errors;case 12:case"end":return o.stop()}}),o,null,[[1,8]])})))()}}},327:function(t,e,n){"use strict";n.r(e),n.d(e,"state",(function(){return r})),n.d(e,"mutations",(function(){return o}));var r=function(){return{content:"",color:""}},o={showMessage:function(t,e){t.content=e.content,t.color=e.color}}},67:function(t,e,n){"use strict";var r={layout:"empty",props:{error:{type:Object,default:null}},data:function(){return{pageNotFound:"404 Not Found",otherError:"An error occurred"}},head:function(){return{title:404===this.error.statusCode?this.pageNotFound:this.otherError}}},o=(n(263),n(66)),c=n(74),l=n.n(c),f=n(338),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{dark:""}},[404===t.error.statusCode?n("h1",[t._v("\n    "+t._s(t.pageNotFound)+"\n  ")]):n("h1",[t._v("\n    "+t._s(t.otherError)+"\n  ")]),t._v(" "),n("NuxtLink",{attrs:{to:"/"}},[t._v("\n    Home page\n  ")])],1)}),[],!1,null,"887c0966",null);e.a=component.exports;l()(component,{VApp:f.a})}},[[236,7,3,8]]]);